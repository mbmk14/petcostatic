//tealium universal tag - utag.96 ut4.0.201804040506, Copyright 2018 Tealium.com Inc. All Rights Reserved.
window.lpTag=window.lpTag||{};lpTag.sdes=lpTag.sdes||[];window.lpTag.autoStart=false;function tealium_liveperson_lib(_site,_section,_url){if(({}).toString.call(_section).match(/\s([a-zA-Z]+)/)[1].toLowerCase()!=="array"){_section=_section?_section.toString():"";_section=_section.split(/\s*,\s*/g);}
window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==='undefined'){window.lpTag={url:_url||document.URL,site:_site||'',section:_section,autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:'1.6.0',_tagCount:1,protocol:'https:',events:{bind:function(app,ev,fn){lpTag.defer(function(){lpTag.events.bind(app,ev,fn);},0);},trigger:function(app,ev,json){lpTag.defer(function(){lpTag.events.trigger(app,ev,json);},1);}},defer:function(fn,fnType){if(fnType==0){this._defB=this._defB||[];this._defB.push(fn);}else if(fnType==1){this._defT=this._defT||[];this._defT.push(fn);}else{this._defL=this._defL||[];this._defL.push(fn);}},load:function(src,chr,id){var t=this;setTimeout(function(){t._load(src,chr,id);},0);},_load:function(src,chr,id){var url=src;if(!src){url=this.protocol+'//'+((this.ovr&&this.ovr.domain)?this.ovr.domain:'lptag.liveperson.net')+'/tag/tag.js?site='+this.site;}var s=document.createElement('script');s.setAttribute('charset',chr?chr:'UTF-8');if(id){s.setAttribute('id',id);}s.setAttribute('src',url);document.getElementsByTagName('head').item(0).appendChild(s);},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var that=this;if(window.attachEvent){window.attachEvent('onload',function(){that._domReady('domReady');});}else{window.addEventListener('DOMContentLoaded',function(){that._domReady('contReady');},false);window.addEventListener('load',function(){that._domReady('domReady');},false);}if(typeof(window._lptStop)=='undefined'){this.load();}},start:function(){this.autoStart=true;},_domReady:function(n){if(!this.isDom){this.isDom=true;this.events.trigger('LPT','DOM_READY',{t:n});}this._timing[n]=(new Date()).getTime();},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init();}else{window.lpTag._tagCount+=1;}}
if("true"==="false"){tealium_liveperson_lib("39396438","");}
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
if(utag.ut.isEmptyObject===undefined){u.isEmptyObject=function(o,a){for(a in o){if(utag.ut.hasOwn(o,a)){return false;}}return true;};}else{u.isEmptyObject=utag.ut.isEmptyObject;}
if(utag.ut.hasOwn===undefined){utag.ut.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};}
if(utag.ut.merge===undefined){u.merge=function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d];}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined"){a[d]=b[d];}}}};}else{u.merge=utag.ut.merge;}
u.ev={"view":1,"link":1};u.initialized=false;u.view_count=0;u.calc_items=function(quan){var q,i=0;for(q=0;q<quan.length;q++){i+=parseInt(quan[q]);}
return i;};u.remove_empty=function(a){var b,t;for(b in utag.loader.GV(a)){t=u.typeOf(a[b]);if(t==="object"){u.remove_empty(a[b]);if(u.isEmptyObject(a[b])){try{delete a[b];}catch(e){a[b]=undefined;}}}else if(!((a[b]===0||a[b]===false)?!0:(t==="array"&&a[b].length===0)?!1:!!a[b])){try{delete a[b];}catch(e){a[b]=undefined;}}}
return a;};u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.add_prod=function(ecom,f){return{"name":ecom.product_name[f],"category":ecom.product_category[f],"sku":ecom.product_sku[f],"price":parseFloat(ecom.product_unit_price[f])};};u.contains_data=function(data){var c,count=0;for(c in data){if(utag.ut.hasOwn(data,c)){if(++count>1){return true;}}}
return false;};u.map={"lp_event":"type","lp_section":"section","js_page.PetcoDataLayer.order.order_merchandise_total":"purchase.order_total","js_page.PetcoDataLayer.order.order_id":"purchase.order_id","js_page.PetcoDataLayer.product.product_name":"purchase.product_name,prodView.product_name,cart.product_name","js_page.PetcoDataLayer.product.product_price":"purchase.product_unit_price,prodView.product_unit_price,cart.product_unit_price","js_page.PetcoDataLayer.product.product_quantity":"purchase.product_quantity,cart.product_quantity","js_page.PetcoDataLayer.product.product_category":"prodView.product_category","js_page.PetcoDataLayer.cart.cart_total_value":"cart.order_total","js_page.PetcoDataLayer.product.product_parent_sku":"purchase.product_sku,prodView.product_sku,cart.product_sku","js_page.PetcoDataLayer.search.search_keyword":"search.keywords"};u.extend=[function(a,b){try{if(1){try{b['lp_section']=['service']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase().indexOf('Receipt'.toLowerCase())>-1){b['lp_event']='purchase';try{b['lp_section']=['checkout']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['event_name'].toString().indexOf('cart_add')>-1){b['lp_event']='cart'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().indexOf('product')>-1){try{b['lp_section']=['sales']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase().indexOf('checkout'.toLowerCase())>-1){try{b['lp_section']=['checkout']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase().indexOf('shoppingcart'.toLowerCase())>-1){try{b['lp_section']=['cart']}catch(e){};b['lp_event']='cart'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_name'].toString().toLowerCase()=='contact-us'.toLowerCase()||b['js_page.PetcoDataLayer.page.page_name'].toString().toLowerCase()=='contact-petco.html'.toLowerCase()){try{b['lp_section']=['contactus']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.pathname'].toString().toLowerCase().indexOf('/pals-rewards'.toLowerCase())>-1||b['dom.pathname'].toString().toLowerCase().indexOf('/palsrewards'.toLowerCase())>-1){try{b['lp_section']=['']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){d=b['js_page.PetcoDataLayer.page.page_type'];if(typeof d=='undefined')return;c=[{'Product':'prodView'},{'account':'ctmrinfo'},{'Receipt':'purchase'},{'Search':'searchInfo'}];var m=false;for(e=0;e<c.length;e++){for(f in c[e]){if(d==f){b['lp_event']=c[e][f];m=true};};if(m)break};if(!m)b['lp_event']='';}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,g,h,data,type,ecom,sdes_array=[],_event=[];u.data={"site":"39396438","section":"","type":"","merge_ecom":"true","product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"vi":{},"ms":{},"per":{},"lead":{},"serv":{},"err":{},"ecom":{},"ecom_blank":{"order_id":"","order_total":"","product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[]}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}else{h=d.split(":");if(h.length==2&&b[h[0]]){e=b[h[0]].split(/\s*,\s*/);for(f=0;f<e.length;f++){if(e[f]===h[1]&&u.map[d]){_event=_event.concat(u.map[d].split(","));}}}}}
if(u.view_count==0&&"true"==="true"){tealium_liveperson_lib(u.data.site,u.data.section,u.data.page_url);}
u.data.customer_id=u.data.customer_id||b._ccustid||"";ecom=u.data.ecom;ecom.order_id=u.data.order_id||b._corder||"";ecom.order_total=u.data.order_total||b._ctotal||"";ecom.order_currency=u.data.order_currency||b._ccurrency||"USD";if(u.data.product_name.length===0&&b._cprodname!==undefined){ecom.product_name=b._cprodname.slice(0);}else{ecom.product_name=u.data.product_name.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){ecom.product_sku=b._csku.slice(0);}else{ecom.product_sku=u.data.product_sku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){ecom.product_category=b._ccat.slice(0);}else{ecom.product_category=u.data.product_category.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){ecom.product_quantity=b._cquan.slice(0);}else{ecom.product_quantity=u.data.product_quantity.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){ecom.product_unit_price=b._cprice.slice(0);}else{ecom.product_unit_price=u.data.product_unit_price.slice(0);}
c=u.typeOf(u.data.type);if(c!=="array"&&u.data.type){u.data.type=u.data.type.toString().split(/\s*,\s*/);}else if(c==="undefined"){u.data.type=[];}
if(u.data.type.length>0){_event=_event.concat(u.data.type);}
if(a==="view"){u.view_count++;}
for(g=0;g<_event.length;g++){data=undefined;type=_event[g];u.data[type]=u.data[type]||{};if(u.data.merge_ecom==="true"){u.merge(u.data[type],utag.handler.C(u.data.ecom));}else{u.merge(u.data[type],utag.handler.C(u.data.ecom_blank));}
if(type==="cart"){ecom=u.data.cart;data={"type":type,"total":parseFloat(ecom.order_total),"currency":ecom.order_currency,"numItems":u.calc_items(ecom.product_quantity),"products":[]};for(f=0;f<ecom.product_name.length;f++){data.products.push({"product":u.add_prod(ecom,f),"quantity":parseInt(ecom.product_quantity[f])});}
if(data.products.length===0){try{delete data["numItems"];}catch(e){data["numItems"]=undefined;}}}else if(type==="purchase"){ecom=u.data.purchase;data={"type":type,"currency":ecom.order_currency,"products":[]};if(ecom.order_total){data.total=parseFloat(ecom.order_total);}
if(ecom.order_id){data.orderId=ecom.order_id;}
for(f=0;f<ecom.product_name.length;f++){data.products.push({"product":u.add_prod(ecom,f),"quantity":parseInt(ecom.product_quantity[f])});}}else if(type==="prodView"){ecom=u.data.prodView;data={"type":type,"currency":ecom.order_currency,"products":{"product":[]}};for(f=0;f<ecom.product_name.length;f++){data.products.product.push(u.add_prod(ecom,f));}}
else if(type==="ctmrinfo"){data={"type":type,"info":{"currency":ecom.order_currency,"cstatus":u.data.vi.cstatus,"customerId":u.data.customer_id,"ctype":u.data.vi.ctype,"balance":parseFloat(u.data.vi.balance),"socialId":u.data.vi.socialId,"imei":u.data.vi.imei,"userName":u.data.vi.userName,"companySize":parseInt(u.data.vi.companySize),"accountName":u.data.vi.accountName,"role":u.data.vi.role,"lastPaymentDate":{"day":parseInt(u.data.vi.lpd_day),"month":parseInt(u.data.vi.lpd_month),"year":parseInt(u.data.vi.lpd_year)},"registrationDate":{"day":parseInt(u.data.vi.rd_day),"month":parseInt(u.data.vi.rd_month),"year":parseInt(u.data.vi.rd_year)}}};}else if(type==="mrktInfo"){data={"type":type,"info":{"channel":u.data.ms.channel,"affiliate":u.data.ms.affiliate,"campaignId":u.data.ms.campaignId}};}else if(type==="personal"){data={"type":type,"personal":{"firstname":u.data.per.firstname,"lastname":u.data.per.lastname,"age":{"age":parseInt(u.data.per.age),"year":parseInt(u.data.per.year),"month":parseInt(u.data.per.month),"day":parseInt(u.data.per.day)},"contacts":[],"gender":u.data.per.gender,"company":u.data.per.company,"language":u.data.per.language}};if(u.typeOf(u.data.per.email)!=="array"){u.data.per.email=[u.data.per.email];}
if(u.typeOf(u.data.per.phone)!=="array"){u.data.per.phone=[u.data.per.phone];}
for(f=0;f<u.data.per.email.length;f++){data.personal.contacts.push({"email":u.data.per.email[f],"phone":u.data.per.phone[f]});}}else if(type==="lead"){data={"type":type,"lead":{"currency":ecom.order_currency,"topic":u.data.lead.topic}};if(u.data.lead.value){data.lead.value=parseFloat(u.data.lead.value);}
if(u.data.lead.id){data.lead.leadId=u.data.lead.id;}}else if(type==="service"){data={"type":type,"service":{"topic":u.data.serv.topic,"status":parseInt(u.data.serv.status),"category":u.data.serv.category,"serviceId":u.data.serv.id}};}else if(type==="searchInfo"){data={"type":type,"keywords":u.data.search.keywords};}else if(type==="error"){data={"type":type,"error":{"message":u.data.err.msg,"code":u.data.err.code}};}
if(data){u.remove_empty(data);if(u.contains_data(data)){sdes_array.push(data);}}}
if("view"===a&&u.view_count>1){c=u.typeOf(u.data.section);if(c!=="array"&&u.data.section){u.data.section=u.data.section.toString().split(/\s*,\s*/);}else{u.data.section=u.data.section||[];}
f={sdes:sdes_array};if(u.data.taglets){f.taglets=u.data.taglets;}
if(c!=="undefined"&&u.data.section.length>0){f.section=u.data.section;}
lpTag.newPage(u.data.page_url||b["dom.url"],f);}else{if(sdes_array&&sdes_array.length>0){lpTag.sdes.push(sdes_array);}}
if(!u.initialized){u.initialized=!0;(function(){var firstTry=true,tryAgain;var _lpStopTrying=function(){clearInterval(tryAgain);};var startLETag=function(){if(lpTag.start){lpTag.isDom=true;lpTag.start();_lpStopTrying();}else if(firstTry){firstTry=false;tryAgain=setInterval(startLETag,100);}};startLETag();})();}
}};utag.o[loader].loader.LOAD(id);}("96","petco.petcoweb"));}catch(error){utag.DB(error);}
