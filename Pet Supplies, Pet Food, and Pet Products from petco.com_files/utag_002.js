//tealium universal tag - utag.21 ut4.0.201804060410, Copyright 2018 Tealium.com Inc. All Rights Reserved.
var certona=certona||{};try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1};u.map={"certona_page_type":"page_type","customer_pals_number":"customerPalsid","cp.WC_UserId":"customer_id","js_page.PetcoDataLayer.product.product_parent_sku":"itemid,product_id"};u.extend=[function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='Add2CartLandingPage'.toLowerCase()){b.certona_page_type="ADDEDTOCART";certona.itemid=b['cp.atc_pid'];}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var cky=document.cookie;var cky1=cky.substring(cky.indexOf('WC_USERACTIVITY'));var userid=cky1.substring(16,cky1.indexOf('='));if(userid>0){resx.customerid=userid;certona.customerid=userid;}else{resx.customerid="";certona.customerid="";}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='search'.toLowerCase()){if(PetcoDataLayer.search.search_results>0){b.certona_page_type="SEARCH";}else{b.certona_page_type="NOSEARCH";}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(/Mobi/.test(navigator.userAgent)){certona.devicetype="MOBILE";}else{certona.devicetype="DESKTOP";}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['qp.myAccountActivePage'].toString().toLowerCase().indexOf('myaccount'.toLowerCase())>-1){b.certona_page_type="ACCOUNT";}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='product'.toLowerCase()){b['certona_page_type']='PRODUCT'}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){d=b['js_page.PetcoDataLayer.page.page_type'];if(typeof d=='undefined')return;c=[{'ShoppingCart':'CART'},{'Receipt':'PURCHASE'},{'Home':'HOME'}];var m=false;for(e=0;e<c.length;e++){for(f in c[e]){if(d.toString().indexOf(f)>-1){b['certona_page_type']=c[e][f];m=true};};if(m)break};},function(a,b){try{if(b['qp.myAccountActivePage'].toString().toLowerCase().indexOf('wishlist'.toLowerCase())>-1){b.certona_page_type="WISHLIST";certona.itemid=PetcoDataLayer.product.product_parent_id.join(';');}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(typeof b.certona_page_type==='undefined'||b.certona_page_type.length===0){return false;}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='category'.toLowerCase()){var certDiv='<div id="category1_rr"></div>';$(certDiv).insertAfter('.col-9.product-listing');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='subcategory'.toLowerCase()){var certDiv='<div id="subcategory1_rr"></div>';$(certDiv).insertAfter('.col-9.product-listing');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='subsubcategory'.toLowerCase()){var certDiv='<div id="subsubcategory1_rr"></div>';$(certDiv).insertAfter('.col-9.product-listing');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['qp.myAccountActivePage'].toString().toLowerCase().indexOf('wishlist'.toLowerCase())>-1){var certDiv='<div id="wishlist1_rr"></div>';$(certDiv).appendTo('.product-rec-horizontal');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='search'.toLowerCase()){var certDiv='<div id="search1_rr"></div>';$(certDiv).appendTo('.pos-static');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='nosearch'.toLowerCase()){var certDiv1='<div id="nosearch1_rr"></div>';var certDiv2='<div id="nosearch2_rr"></div>';var certDiv3='<div id="nosearch3_rr"></div>';$(certDiv1).appendTo('.spacer-md-top');$(certDiv2).appendTo('.spacer-md-top');$(certDiv3).appendTo('.spacer-md-top');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='Add2CartLandingPage'.toLowerCase()){var certDiv='<div id="addtocart1_rr"></div>';$(certDiv).insertAfter('.added-to-cart-tile');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='cart'.toLowerCase()){var certDiv='<div id="cart1_rr"></div>';var certDiv2='<div id="cart2_rr"></div>';$(certDiv2).insertAfter('.cart-container');$(certDiv).insertAfter('.cart-container');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['certona_page_type'].toString().toLowerCase()=='PRODUCT'.toLowerCase()){var certDiv='<div id="product1_rr"></div>';var certDiv2='<div id="product2_rr"></div>';$(certDiv).insertBefore('.clearfix.detail-tabs');$(certDiv2).insertAfter('.clearfix.detail-tabs');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='receipt'.toLowerCase()){var certDiv='<div id="orderconfpage_rr"></div>';$(certDiv).insertAfter('.row.confirm-summary-flex');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['js_page.PetcoDataLayer.page.page_type'].toString().toLowerCase()=='home'.toLowerCase()){var certDivHome='<div id="home1_rr"></div>';$(certDivHome).insertAfter('#mobile-carousel');}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f;u.data={"base_url":"//edge1.certona.net/cd/##utag_cid##/##utag_domain##/scripts/resonance.js","cid":"bf9bf157","domain":"petco.com","page_type":"NONE","product_id":[],"product_category":[],"product_quantity":[],"product_unit_price":[],};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
u.data.order_id=u.data.transactionid||u.data.order_id||b._corder||"";u.data.order_subtotal=u.data.total||u.data.order_subtotal||b._csubtotal||"";u.data.customer_id=u.data.customerid||u.data.customer_id||b._ccustid||"";if(u.data.product_id.length===0&&b._cprod!==undefined){if(typeof u.data.itemid==="undefined"){u.data.product_id=b._cprod.slice(0);}else{u.data.product_id=u.data.itemid.slice(0);}}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){if(typeof u.data.qty==="undefined"){u.data.product_quantity=b._cquan.slice(0);}else{u.data.product_quantity=u.data.qty.slice(0);}}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){if(typeof u.data.price==="undefined"){u.data.product_unit_price=b._cprice.slice(0);}else{u.data.product_unit_price=u.data.price.slice(0);}}
if(u.data.page_type==="OTHER"){utag.DB("Warning: You've selected other as a page type and haven't overridden it in mapping.");}
if(u.data.page_type!=="NONE"){certona.pagetype=u.data.page_type;}
if(u.data.customer_id){certona.customerid=u.data.customer_id;}
if(u.data.page_type==="PURCHASE"||u.data.order_id){certona.pagetype="PURCHASE";certona.itemid=u.data.product_id.join(";");certona.qty=u.data.product_quantity.join(";");certona.transactionid=u.data.order_id;var subtotal=0;for(var i=0;i<u.data.product_unit_price.length;i++){u.data.product_unit_price[i]=(parseFloat(u.data.product_unit_price[i])*parseFloat(u.data.product_quantity[i])).toFixed(2);subtotal+=parseFloat(u.data.product_unit_price[i]);}
certona.price=u.data.product_unit_price.join(";");certona.total=u.data.order_subtotal||subtotal;}else if(u.data.page_type==="PRODUCT"){certona.itemid=u.data.product_id[0];}else if(u.data.page_type==="CART"){certona.itemid=u.data.product_id.join(";");}else if(u.data.page_type==="CATEGORYLANDING"||u.data.page_type==="CATEGORY"){certona.categoryid=u.data.product_category[0];}
u.data.base_url=u.data.base_url.replace("##utag_cid##",u.data.cid);u.data.base_url=u.data.base_url.replace("##utag_domain##",u.data.domain);u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":'utag_21'});}};utag.o[loader].loader.LOAD(id);}("21","petco.petcoweb"));}catch(error){utag.DB(error);}
